<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
  <meta http-equiv="CONTENT-TYPE" content="text/html; charset=UTF-8">
  <title>glideinWMS - Factory</title>
  <link rel="stylesheet" type="text/css" href="../common/glideinWMS.css" media="screen, projection" />
</head>

<body lang="en-US" dir="ltr">
    <h1>
        <a href="index.html">GlideinWMS</a>
	<span>The Glidein-based Workflow Management System</span>
    </h1>
    <ul class="breadcrumbs">
	    <li> <a href="../index.html">Home</a></li>
	    <li> <a href="./index.html">WMS Factory</a></li>
	    <li> <a href="./configuration.html">Configuration</a></li>
        <li>Custom Variables</li>
    </ul>
    <div class="clear" />
    <div class="leftmenu">
        <ul class="components">
	        <li> <a href="../index.html">Home</a></li>
	        <li> <a href="../download.html">Download</a></li>
	        <li> <a href="../frontend/index.html">Glidein Frontend</a></li>
                <li> <a href="../corral.html">Corral Frontend</a></li>
	        <li> <a href="../factory/index.html">WMS Factory</a></li>
	        <li> <a href="../components/index.html" >Components</a></li>
                <li> <a href="../recipes/index.html">Recipes</a></li>
	        <li> <a href="../components/faq.html" class="last">FAQ</a></li>
        </ul>
        <div class="search">
            <div id="cse-search-form" style="width: 100%;">Loading</div>
            <script src="http://www.google.com/jsapi" type="text/javascript"></script>
            <script src="../common/glidein.js" type="text/javascript"></script>
            <script type="text/javascript">
            google.load('search', '1', {language : 'en', style : google.loader.themes.MINIMALIST});
            google.setOnLoadCallback(onLoad);
            </script>
        </div>
    </div>
    <div id="searchcontent"><h2>Search Results</h2><div id="cse"></div> </div>
<div class="content">
    <div class="heading">
    <img align="right" width="280px" border="0px"
        src="../images/simple_diagram.png" usemap="#rightimage">
    <map name="rightimage">
        <area shape="rect" coords="90,3,177,60" href="../frontend/index.html" />
        <area shape="rect" coords="5,88,118,146" href="../components/collector_install.html" />
        <area shape="rect" coords="134,88,275,146" href="../factory/index.html" />
        <area shape="rect" coords="189,3,274,60" target="_blank" href="../corral.html" />
    </map>

    <h2>WMS Factory</h2>
	<ul class="subcomponents">
	     <li> <a href="./index.html">Overview</a></li>
         <li> <a href="./install.html">Install</a></li>
	     <li> Configuration</li>
	     <li> <a href="./design.html">Design</a></li>
	     <li> <a href="./monitoring.html">Monitoring</a></li>
	     <li class="last"> <a href="./troubleshooting.html">Troubleshooting</a></li>
	</ul>
        <h3>Custom Condor Variables</h3>
	</div>
<div class="jump">
<u>Jump to:</u>
<ol>
    <LI><A HREF="#location">Variable location</A>
    <LI><A HREF="#condor_vars">Condor vars file</A>
    <LI><A HREF="#vars">Variables used</A> 
    <LI><A HREF="#admin_vars">Admin variables</A>
    <LI><A HREF="#dyn_vars">Dynamic variables </A>
    <LI><A HREF="#lifetime">Lifetime of a glidein</A>
</ol>
</div>
<div class="related">
Related Links: <br/>
<ul>
        <LI><A HREF="./custom_scripts.html">Custom Scripts</A></li>
</ul>
</div>
<div class="section">
 
<H2>Description</H2>
<P>This document describes what configuration variables are used by
the glideins. Most administrators never need to touch most of them, but a
sophisticated Glidein Factory administrator may need to tweak some of
them to implement the desired policies (for example: require
encryption over the wire) or to address the needs of a particular
site (for example: max allowed wallclock time).</P>
</div>

<div class="section">
<H2><A NAME="location"></A>Configuration variable location</H2>
<P>The glideinWMS ships with a set of pre-defined configuration
variables, that are stored in two files, known as <I>condor vars
files</I>:</P>

<BLOCKQUOTE>
    glideinWMS/creation/web_base/condor_vars.lst<BR>
    glideinWMS/creation/web_base/condor_vars.lst.entry
</BLOCKQUOTE>
<P>The two files are equivalent, but were split for historical
reasons, and the second one is meant to contain site specific
configuration variables.<BR><B>These files should never be modified,
and represent just the default shipped by the software!</B> 
</P>
<P>A glideinWMS administrator can change the values of the predefined
variables (with some exceptions, see <A HREF="#dyn_vars">below</A>),
and define new ones using the <A HREF="configuration.html#args">Glidein
Factory configuration</A> file.</P>

</div>

<div class="section">
<H2><A NAME="condor_vars"></A>Condor vars files</H2>
<P>The condor vars files contain the glideinWMS pre-defined
configuration variables, and <B>should never be modified</B>.<BR>However,
a glideinWMS administrator should nevertheless be able to read them.</P>
<P>Each of them is an ASCII file, with one entry per row. <BR>Lines
starting with # are comments and are ignored.</P>
<P>Each non comment line must have 7 columns. Each column has a
specific meaning:</P>
<OL>
    <LI>Attribute name</li>

    <LI>Attribute type
    <UL>
        <LI>I &ndash; integer</li>
        <LI>S &ndash; quoted string</li>
        <LI>C &ndash; unquoted string (i.e. Condor keyword or expression)</li>
    </UL>
    </li>
    <LI>Default value, use &ndash; if no default</li>

    <LI>Condor name, i.e. under which name should this attributed be
    known in the configuration used by Condor daemons</li>
    <LI>Is a value required for this attribute? <BR>Must be Y or N.
    If Y and the attribute is not defined, the glidein will fail.</li>
    <LI>Will condor_startd publish this attribute to the
    collector?<BR>Must be Y or N.</li>
    <LI>Will the attribute be exported to the user job environment?
    <UL>
        <LI>- - Do not export (for glidein/condor internal use)</li>

        <LI>+ - Export to the user job environment using the original
        attribute name</li>
        <LI>@ - Export to the user job environment using the Condor name</li>
    </UL>
    </li>
</OL>
<P>Here below, you can see a short extract; the semantics of the
variables is defined <A HREF="#vars">below</A>.</P>
<PRE># VarName               Type    Default         CondorName                      Req.    Export  UserJobEnvName
#                       S=Quote - = No Default  + = VarName                             Condor  - = Do not export
#                                                                                               + = Use VarName
#                                                                                               @ = Use CondorName
#################################################################################################################
X509_USER_PROXY         C       -               GSI_DAEMON_PROXY                Y       N       -
USE_MATCH_AUTH          C       -     SEC_ENABLE_MATCH_PASSWORD_AUTHENTICATION  N       N       -
GLIDEIN_Factory         S       -               +                               Y       Y       @
GLIDEIN_Name            S       -               +                               Y       Y       @
GLIDEIN_Collector       C       -               HEAD_NODE                       Y       N       -
GLIDEIN_Expose_Grid_Env C       False     JOB_INHERITS_STARTER_ENVIRONMENT      N       Y       +
TMP_DIR                 S       -               GLIDEIN_Tmp_Dir                 Y       Y       @
CONDORG_CLUSTER         I       -               GLIDEIN_ClusterId               Y       Y       @
CONDORG_SUBCLUSTER      I       -               GLIDEIN_ProcId                  Y       Y       @
CONDORG_SCHEDD          S       -               GLIDEIN_Schedd                  Y       Y       @
SEC_DEFAULT_ENCRYPTION  C       OPTIONAL        +                               N       N       -
SEC_DEFAULT_INTEGRITY   C       REQUIRED        +                               N       N       -
MAX_MASTER_LOG          I       1000000         +                               N       N       -
MAX_STARTD_LOG          I       10000000        +                               N       N       -</PRE>

</div>


<div class="section">
<H2>
<A NAME="vars"></A>Glidein Variables</H2>
<P>This section defines all the variables that the glideins explicity
use. Please be aware that, apart from the below mentioned variable
many other variables will be used by the Condor daemons, since
glideins are Condor based; see the <A target="_blank" HREF="http://www.cs.wisc.edu/condor/manual/v7.2/3_3Configuration.html">Condor manual</A> for more details.</P>
<P>The variables can be divided based on their source:
</p>
<UL>
    <LI><A HREF="#factory_attrs">Factory config xml - attr tags</A></li>
    <LI><A HREF="#factory_vars">Factory config xml - configuration</A></li>
    <LI><A HREF="#frontend_vars">Frontend variables</A></li>
    <LI><A HREF="#vm_vars">Cloud VM variables</A></li>
    <LI><A HREF="#dyn_vars">Dynamically generated</A></li>
    <LI><A HREF="#path_vars">Directory Paths</A></li>
    <LI><A HREF="#glidein_vars">Glidein Scripts (dynamic)</A></li>
</UL>
</div>

<div class="section">
<H3><A NAME="factory_attrs"></A>Factory config xml - attr tags</H3>
<P>This section presents all the variables that can be directly
changed by a Glidein Factory administrator using attr tags in the
factory configuration XML using the following tags:</P>
<BLOCKQUOTE>
    <B>&lt;attr name</B>=&ldquo;<I>name</I>&rdquo; <B>value</B>=&ldquo;<I>val</I>&rdquo;

<B>type</B>=&ldquo;<I>type</I>&rdquo; ...<B>/&gt;</B>
</BLOCKQUOTE>
<P>More information on the XML format can be found in 
<A HREF="configuration.html#args">Glidein Factory configuration</A> section.
<BR/>
If not specified in the XML, most of these variables have
defaults set in <I>condor vars</I> files,
which are used if the Glidein Factory administrator does not override
them. These defaults are listed below.
</P>
<P>Please also note that some of these variables may also be provided
by the VO factory clients.</P>

<TABLE class="attributes">
    <TR class="head">
        <td> <P><b>Name</b></P></td>
        <td> <P><b>Type</b></P></td>
        <td> <P><b>Default Value</b></P></td>
        <td> <P><b>Description</b></P></td>

    </TR>
    <TR>
        <td> <b>GLIDEIN_Site</b></td>
        <td> String </td>
        <td>Entry name</td>
        <td> <P>

            Logical name of the Grid site where 
            the glidein is running. This information is 
            published both in the startd ClassAd and
            in the user job environment.</P>
        </TD>
    </TR>
    <TR>
        <td> <b>GLIDEIN_Hold</b> </td>
        <TD> Exp (Bool)</td>

        <TD> True </TD>
        <TD ROWSPAN=2>
            <P>Condor expression to use to specify when a user job in the glideins should be held. 
            If any expression is true, the glidein is held.  This is usually done to specify "bad"
            jobs, such as those that claim too much memory.
        </TD>

    </TR>
    <TR>
        <td> <b>GLIDEIN_Entry_PREEMPT</b> </td>
        <TD> Exp (Bool)</td>
        <TD>True </TD>
    </TR>
    <TR>
        <td> <b>GLIDEIN_PREEMPT</b> </td>
        <TD> Exp (Bool)</td>

        <TD> True </TD>
        <TD>
            <P>Condor expression to use to specify when a user job in the glideins should be preempted. 
            If any expression is true, the glidein is preempted.  This is usually done to specify 
            custom preemption policies for user jobs.
        </TD>

    </TR>

    <TR>
        <td> <b>GLIDEIN_Rank</b> </td>
        <td>Exp (Int)</td>
        <TD>1</TD>
        <TD ROWSPAN=2>
                <P>Used in calculating the Condor <A HREF="http://www.cs.wisc.edu/condor/manual/v7.2/3_3Configuration.html#param:Rank">RANK</A></P><P>They
                are summed together, and the user job with the largest rank will run
                first.</P>

        </TD>
    </TR>
    <TR>
        <td> <b>GLIDEIN_Entry_Rank</b> </td>
        <td> Exp (Int) </TD>
        <TD> 1 </TD>

    </TR>

    <TR>
        <td> <b>GLIDEIN_Max_Idle</b> </td>
        <td> Int </td>
        <td>1200 <br/>(20 mins) </TD>
        <TD>

            <P>Max amount of time a condor_startd will wait 
            to be matched before giving up and terminating.</P>
        </TD>
    </TR>
    <TR>
        <td> <b>GLIDEIN_Max_Tail</b> </td>
        <td> Int </td>
        <td>400 <br/>(6 mins) </TD>
        <TD>

            <P>Max amount of time a condor_startd will wait
            after having already completed a job to be matched again.
            (i.e. the tail of a job).
            </p>
        </TD>
    </TR>



    <TR>
        <td> <b>GLIDEIN_Retire_Time</b> </td>
        <TD> Int </TD>
        <TD> 21600 <br/>(6 hours) </TD>
        <TD ROWSPAN=2>
            <P>How long the condor_startd be running before 
            no longer accepting jobs.
            <br/>
            The random spread
            is used to improve the efficiencies, so the actual value used by
            Condor will be anywhere between GRT-GRTS and GRT.</P>

        </TD>
    </TR>
    <TR>
        <td> <b>GLIDEIN_Retire_Time_Spread</b> </td>
        <TD> Int </td>
        <td> 7200<BR>(2 hours)</td>

    </TR>
    <TR>
        <td> <b>GLIDEIN_Max_Walltime</b> </td>
        <TD> Int </TD>
        <TD> N/A </TD>

        <TD>
            <P>Max allowed time for the glidein.<BR>This variable is optional.  If you specify this variable, 
            then Condor startup scripts will calculate the GLIDEIN_Retire_Time for the glidein as GLIDEIN_MAX_Walltime - GLIDEIN_Job_Max_Time.  
            If GLIDEIN_Retire_Time is also specified, it will be ignored and only the calculated value is used.  Note that if GLIDEIN_Job_Max_Time is
            specified but is greater than GLIDEIN_Max_Walltime or 
            does not allow enough time for graceful shutdown, it will
            be reduced by the glidein.  
            See <a href="#lifetime">Lifetime of a glidein</a> for details.</P>
        </TD>
    </TR>
    <TR>
        <td> <b>GLIDEIN_Graceful_Shutdown</b> </td>
        <TD> Int </TD>
        <TD> 120 </TD>
        <TD>
            <P>Once DAEMON_SHUTDOWN is reached and the glidein pilot enters the 
            <A HREF="http://www.cs.wisc.edu/condor/manual/v7.2/3_5Policy_Configuration.html#SECTION00456000000000000000"><I>Retiring</I> state</a>, 
            this amount passes to allow the startd and job to gracefully shutdown before forcefully terminating the glidein.
            See <a href="#lifetime">Lifetime of a glidein</a> for details.</P>
        </TD>
    </TR>

    <tr>
        <td> <b>PREEMPT</b></td>
        <td> Bool </td>
        <td> False </td>
        <TD> 1 </TD>
            Specifies whether preemption is allowed to occur on this glidein.
        </td>
    </tr>
    <tr>
        <td> <b>PREEMPT_GRACE_TIME</b></td>
        <td> Int </td>
        <td> 10000000 </td>
        <td>
            This value affects the condor value "MaxJobRetirementtime"
            and is an integer value representing the number of seconds 
            a preempted job will be allowed to run before being evicted.
            This only affects behaviour if PREEMPT=True.
        </td>
    </tr>
   <tr>
        <td> <b>HOLD_GRACE_TIME</b></td>
        <td> Int </td>
        <td> 0 </td>
        <td>
            This value affects the condor value "MaxJobRetirementtime"
            and is an integer value representing the number of seconds
            a job that triggers WANT_HOLD will be allowed to run before being evicted.
            This only affects behaviour if GLIDEIN_HOLD, GLIDEIN_Entry_HOLD,
            GLIDECLIENT_HOLD, or GLIDECLIENT_Group_HOLD are specified and 
            become true.  By default, these "bad" jobs are immediately evicted.
        </td>
    </tr>

    <TR>
        <td> <b>GLIDEIN_Monitoring_Enabled</b> </td>
        <TD> Bool </TD>
 	<TD> True </TD>
 	<TD> <P>Ability to control whether the pseduo-interactive monitoring slot is started on the worker node.  Set to False if you do not want the monitoring slot started.</P>
 	</TD>
    </TR>
    <TR>
        <td> <b>GLIDEIN_Resource_Slots</b> </td>
        <TD> String </TD>
 	<TD> None </TD>
 	<TD> <p>Special purpose resources added in separate slots or the main slot of the glidein. The separate slots will never be available for the regular jobs.
        This string is a semicolon separated list of comma separated resource descriptions.
        Each resource description contains the <b>name</b> (case insensitive) and optionally the <b>number</b> of resource instances (default is 1 (*), the
        total <b>memory</b> reserved
        (default is 128MB time the number of resources) and a <b>type</b> option to say if the resource is added to the main slot (<tt>main</tt>) or has a new dedicated
        slot (<tt>partitionable</tt>) or many dedicated slots (one per instance, <tt>static</tt>).
        The default is partitionable, unless there is only one resource instance, then is static.
        When adding resources to the <tt>main</tt> slots: the memory parameter is ignored; HTCondor splits automatically resources
        depending on the number of CPUs and having a partitionable main slot or not;
        if the number of resources is not equal (or an exact multiple) to the number of CPUs, then you must select partitionable slots
        (<tt>slots_layout="partitionable"</tt> in the config/submit section of the entry configuration or SLOT_LAYOUT partitionable in the frontend configuration)
        otherwise the startd may fail due to impossible configuration
        <!--,
        e.g. when you add 3 units of a resource to a node with 8 CPUs divided statically in 8 main slots, the first 3 of them will have also your resource.
        -->
        (check the <a href=http://research.cs.wisc.edu/htcondor/manual/v8.2/3_5Policy_Configuration.html#SECTION004510000000000000000">
            HTCondor manual to learn more on how resources are split</a>)
        </p>
        <p>The parameters in a resource description can be listed or specified using their name: name, number, memory, type (see the last example below).</p>
        <p>Jobs submission must use <tt>request_RESOURCE=N</tt> with <tt>N&gt;0</tt> to use these slots or to use the resource in the main slot,
            e.g. request_ioslot=1</p>
        <p>Examples:<br>
        <ul>
            <li><b>value="ioslot,2,200,static"</b> creates statically partitioned 2 ioslot resources with 100MB memory each.</li>
            <li><b>value="ioslot"</b> creates 1 ioslot resource with 128MB</li>
            <li><b>value="ioslot,2;monitor;GPUs,3,,main"</b> creates (1) a partitionable slot with 2 ioslot resources and 256MB total memory (2) 1 monitor slot resource with 128MB memory
                (3) adds 3 GPUs to the main slot/slots</li>
            <li><b>value="GPUs,type=main"</b> discovers (*) how many GPUs are available and adds them to the main slot</li>
        </ul>
        </p>
        <p>(*) GPUs is a special resource name. If no number is specified, the glidein will invoke
            <a href="https://htcondor-wiki.cs.wisc.edu/index.cgi/wiki?p=HowToManageGpus">HTCondor's GPU discovery mechanism</a>
            and get the number from there, which could be 0 if there are no GPUs. Your job will find in the HTCondor ClassAd also
            all the special attributes about the GPUs. If no number is specified and the auto-discovery fails 0 GPUs are assumed.
            Since you don't know the number of GPUs that will be added to the main slot, the slot_layout must be partitionable.
        </p>
 	</TD>
    </TR>
    <TR>

        <td> <b>GLEXEC_BIN</b> </td>
        <td> String </TD>
        <td> None </TD>
        <td>
            <P>If set, Condor will launch all user jobs via <A HREF="http://vdt.cs.wisc.edu/components/glexec.html">glexec</A>,
            thus <A HREF="configuration.html#glexec">running the job under the
            appropriate local account</A>. This is important both for <A HREF="http://cd-docdb.fnal.gov/cgi-bin/ShowDocument?docid=2061">glideinWMS
            security</A> and for <A HREF="http://cd-docdb.fnal.gov/cgi-bin/ShowDocument?docid=2943">accounting
            purposes</A>.<BR>A special value of &quot;OSG&quot; can be used to
            automatically find the locally installed gLExec on OSG worker
            nodes.</P>

            <P>This variable is renamed to <B>GLEXEC</B> in the condor
            config.</P>
        </td>
    </TR>
    <TR>
        <td><b> GLEXEC_JOB</b> </td>

        <TD> Bool </TD>
        <TD> False </TD>
        <TD>
            <P>If set to False, the condor_starter is run sharing the <A HREF="configuration.html#glexec">same
            UID as the user job</A>. This has security implications.</P>
            <P>If running Condor 7.1.3 or later, it is recommended to turn
            this on and have the condor_starter be protected from the user
            jobs. 
            </P>

        </td>
    </TR>
    <TR>
        <td> <b>GLIDEIN_Use_PGroups</b> </td>
        <TD> Bool </TD>
        <TD> False </TD>

        <TD>
            <P>Should process group monitoring be enabled?</P>
            <P>This is a <A HREF="http://www.cs.wisc.edu/condor/manual/v7.2/3_3Configuration.html#param:UseProcessGroups">Condor
            optimization</A> parameter. Unfortunately, it negatively
            interferes with the batch systems used by the Grid sites, so it
            should not be turned on unless you have a very good reason to do
            so.</P>
        </TD>
    </TR>
    <TR>

        <td> <b>UPDATE_COLLECTOR_WITH_TCP</b> </td>
        <td> Bool </td>
        <td> True </TD>
        <TD>
            <P>If True, forces the glidein to use <A HREF="configuration.html#tcp">TCP updates</A>.<BR>The collector must be configured in the same way
            for this to work.</P>

            <P>Also see the <A HREF="http://www.cs.wisc.edu/condor/manual/v7.2/3_3Configuration.html#param:UpdateCollectorWithTcp">Condor documentation</A> for implications and side effects.</P>
        </TD>
    </TR>
    <TR>
        <td> <b>WANT_UDP_COMMAND_SOCKET</b> </td>

        <TD> Bool </TD>
        <TD> False </TD>
        <TD>
            <P>If True, enable the startd UDP command socket (Condor
            default).</P>
            <P>Using the UDP command socket is a <A HREF="http://www.cs.wisc.edu/condor/manual/v7.2/3_3Configuration.html#param:WantUDPCommandSocket">Condor
            optimization</A> that makes working over firewalls and NATs very
            difficult. It is thus recommended you leave it disabled in the
            glideins.</P>

            <P>Please note if you leave it disabled, that you must configure
            the schedd with<BR>SCHEDD_SEND_VACATE_VIA_TCP = True<BR>and the
            negotiator with<BR><A HREF="http://www.cs.wisc.edu/condor/manual/v7.2/3_3Configuration.html#param:NegotiatorInformStartd">NEGOTIATOR_INFORM_STARTD</A>
            = False<BR>to have a functional system.</P>
        </TD>
    </TR>
    <TR>
        <td> <b>STARTD_SENDS_ALIVES</b> </td>

        <TD> Bool </TD>
        <TD> True </TD>
        <TD>
            <P>If set to False, the schedd will be sending keepalives to the
            startd.</P>
            <P>Setting this to True instructs the startd to send keepalives
            to the schedd. This improves the glidein behavior when running
            behind a firewall or a NAT.</P>
            <P>Please note that the schedd must be configured in the same way for this to work.</P>

        </TD>
    </TR>
    <TR>
        <td> <b>SEC_DEFAULT_INTEGRITY</b> </td>
        <TD> Exp </TD>
        <TD> REQUIRED </TD>

        <TD ROWSPAN=2>
            <P>Security related settings. Please notice that the glideins
            always require GSI authentication.</P>
            <P>For more details see the <A HREF="configuration.html#security">configuration
            page</A> or the <A HREF="http://www.cs.wisc.edu/condor/manual/v7.2/3_6Security.html">Condor
            manual</A>.</P>
        </TD>
    </TR>

    <TR>
        <td> <b>SEC_DEFAULT_ENCRYPTION</b> </td>
        <TD> Exp </TD>
        <TD> OPTIONAL </TD>
    </TR>

    <TR>
        <td> <b>USE_MATCH_AUTH</b> </td>
        <TD> Bool </td>
        <TD> False </TD>
        <TD>

            <P>Another security setting.</P>
            <P>If set to True, the schedd and the startd will use a low
            overhead protocol. See the <A HREF="configuration.html#security">configuration
            page</A> or the <A HREF="http://research.cs.wisc.edu/htcondor/manual/v8.2/3_3Configuration.html#param:SecEnableMatchPasswordAuthentication">Condor
            manual</A>.</P>
        </TD>
    </TR>
    <TR>

        <td> <b>MAX_MASTER_LOG</b> </td>
        <TD> Int </TD>
        <TD> 1M </TD>
        <TD ROWSPAN=3>
            <P>What is the maximum size the logs should grow.</P>

            <P>Setting them too low will made debugging difficult.<BR>Setting
            them too high may fill up the disk in anomalous situations, both
            on the work nodes and on the glidein factory.</P>
        </TD>
    </TR>
    <TR>
        <td> <b>MAX_STARTD_LOG</b> </td>
        <TD> Int </TD>

        <TD> 10M </TD>
    </TR>
    <TR>
        <td> <b>MAX_STARTER_LOG</b> </td>
        <TD> Int </TD>

        <td> 10M </TD>
    </TR>
    <TR>
        <td> <b>GCB_LIST</b> </td>
        <TD> List </TD>

        <TD ROWSPAN=4> - </TD>
        <TD ROWSPAN=4>
            <P>Configure <A HREF="http://www.cs.wisc.edu/condor/manual/v7.2/3_7Networking_includes.html#SECTION00473000000000000000">GCB</A>.</P>
            <P>GCB was needed to run glideins on worker nodes behind a
            firewall or a NAT in older versions of HTCondor.<BR>
            <B>Note: Newer versions of HTCondor do not support it anymore.</B></P>
            <P>For more information, see the <A HREF="../components/condor.html#gcb">configuration page</A>.</P>

        </TD>
    </TR>
    <TR>
        <td> <b>GCB_ORDER</b> </td>
        <TD> String </TD>
    </TR>

    <TR>
        <td> <b>GCB_MIN_FREE</b> </td>
        <TD> Int </TD>
    </TR>
    <TR>
        <td> <b>GCB_REMAP_ROUTE</b> </td>

        <TD> String </TD>
    </TR>
    <TR>
        <td> <b>MASTER_GCB_RECONNECT_TIMEOUT</b> </td>
        <td> Int </TD>

        <TD> 1200<BR>(20 mins) </TD>
        <TD>
            <P>Specifies how long should a glidein wait 
            before giving up on a
            GCB, if network connectivity is lost.</P>
        </TD>
    </TR>
    <TR>
        <td> <b>USE_CCB</b> </td>

        <TD> Bool </TD>
        <TD> False </TD>
        <TD>
            <P>If set to True, it will enable <A HREF="http://research.cs.wisc.edu/htcondor/manual/v8.2/3_7Networking_includes.html#sec:CCB">HTCondor Connection Brokering (CCB)</A>,
            which is needed if the glideins are behind a firewall or a NAT.</P>
        </TD>

    </TR>
    <TR>
        <td> <b>USE_SHARED_PORT</b> </td>

        <TD> Bool </TD>
        <TD> False </TD>
        <TD>
            <P>If set to True, it will enable <A HREF="http://research.cs.wisc.edu/htcondor/manual/v8.2/3_7Networking_includes.html#sec:shared-port-daemon">the shared port daemon</A>,
               which will reduce the number of connections between the glidein and the collectors.
               </P>
        </TD>

    </TR>
    <TR>
        <td> <b>GLIDEIN_CPUS</b> </td>
        <TD> Int</td>

        <TD> 1 </TD>
        <TD>
            <P>Number of CPUs glidein should use. GLIDEIN_CPUS is used to set NUM_CPUS for the HTCondor started by the glidein. Use "auto" to let glidein determine this from the worker node, set a value to force a different number. In case of static partitioning, glidein will create GLIDEIN_CPUS number of slots. In case of dynamic partitioning, the slots will be created automatically based on the CPUs required by the job and GLIDEIN_CPUS is the sum of the slots made available. Refer to HTCondor manual for info on <a href="http://research.cs.wisc.edu/htcondor/manual/v8.1/3_3Configuration.html#19943">NUM_CPUS</a></P>
        </TD>
    </TR>
    <TR>
        <td> <b>GLIDEIN_MaxMemMBs</b> </td>
        <TD> Int</td>
        <TD> None </TD>
        <TD>
            <P>Amount of memory glidein should use. If set, GLIDEIN_MaxMemMBs is used to set total MEMORY used for the HTCondor and Startd and jobs started by the glidein. If not GLIDEIN_MaxMemMBs is not set and GLIDEIN_MaxMemMBs_Estimate is TRUE, GLIDEIN_MaxMemMBs is calculated based on the memory available on the worker node. If GLIDEIN_MaxMemMBs is not set and GLIDEIN_MaxMemMBs_Estimate is not TRUE, glidein lets HTCondor decide the amount of memory. Refer to HTCondor manual for info on <a href="http://research.cs.wisc.edu/htcondor/manual/v8.1/3_3Configuration.html#19977">MEMORY</a></P>
        </TD>
    </TR>
    <TR>
        <td> <b>GLIDEIN_MaxMemMBs_Estimate</b> </td>
        <TD> Bool</td>

        <TD> False </TD>
        <TD>
            <P>Used in conjunction with GLIDEIN_MaxMemMBs. See GLIDEIN_MaxMemMBs for the description.</P>
        </TD>
    </TR>
    <TR>
        <td> <b>GLIDEIN_Factory_Report_Failed</b> </td>
        <td> String </TD>
        <td> ALIVEONLY </TD>

        <TD>
            <p>This attribute regulates advertising of validation failures to the Factory collector.
            <ul>
              <li><b>NEVER</b> - The glidein will just fail, and do nothing.
              <li><b>ALIVEONLY</b> - The glidein will advertise a Master ClassAd in <i>Drained</i> state and <i>Retiring</i> activity for the lifetime of the glidein script.
              <li><b>ALWAYS</b> - Similar to <b>ALIVEONLY</b>, but will also send a final ClassAd in <i>Drained</i> state and <i>Killing</i> activity just before dying.
            </ul>
            <p>When advertised, the classad is flagged <i>GLIDEIN_Failed=True</i>, 
               the error is recorded in the <i>GLIDEIN_FAILURE_REASON</i> and
                  <i>GLIDEIN_EXIT_CODE</i> attributes, and
               the failing script is recorded in the <i>GLIDEIN_LAST_SCRIPT</i> attribute.
       </TD>
    </TR>
</TABLE>
</div>
<div class="section">
<H3><A NAME="factory_vars"></A>Factory config xml - configuration</H3>
<P>The second set of variables comes from values the Glidein Factory
administrator defined to make the factory to work. They are generated
based on xml tags in the factory configuration (most in the entry tag).
They cannot be changed by an administrator in any other way.
</P>
<TABLE class="attributes">
    <TR class="head">
        <td> <b>Name</b> </td>
        <td> <b>Type</b> </td>

        <td> <b>Source</b> </td>
        <td> <b>Description</b> </td>
    </TR>
    <TR>
        <td> <b>GLIDEIN_Factory</b> </td>

        <TD> String </TD>
        <TD>
            &lt;glidein factory_name=&quot;<B>value</B>&quot;&gt;
        </TD>
        <TD>
            <P>Logical name of the Glidein Factory machine 
            (like &ldquo;osg1&rdquo;).</P>

        </TD>
    </TR>
    <TR>
        <td> <b>GLIDEIN_Name</b> </td>
        <TD> String </TD>
        <TD>

            &lt;glidein glidein_name=&quot;<B>value</B>&quot;&gt;
        </TD>
        <TD>
            <P>Identification name of the Glidein Factory 
            instance (like &ldquo;v1_0&rdquo;).</P>
        </TD>
    </TR>
        <TR>

            <td> <b>GLIDEIN_Entry_Name</b> </td>
            <TD> String </TD>
            <TD>
                ...&lt;entries&gt;&lt;entry name=&rdquo;<B>value</B>&rdquo;&gt;

            </TD>
            <TD>
                <P>Identification name of the entry point 
                (like &ldquo;ucsd5&rdquo;).</P>
            </TD>
        </TR>
        <TR>
            <td> <b>GLIDEIN_GridType</b> </td>

            <TD> String </TD>
            <TD>
                ...&lt;entries&gt;&lt;entry gridtype=&ldquo;<B>value</B>&rdquo;&gt;
            </TD>
            <TD>

                <P>Type of Grid resource (like &ldquo;gt2&rdquo;).</P>
            </TD>
        </TR>
        <TR>
            <td> <b>GLIDEIN_Gatekeeper</b> </td>
            <TD> String </TD>

            <TD>
                ...&lt;entries&gt;&lt;entry gatekeeper=&ldquo;<B>value</B>&rdquo;&gt;</P>
            </TD>
            <TD>
                <P>URI of the Grid gatekeeper (like
                &ldquo;osg1.ucsd.edu/jobmanager-pbs&rdquo;)</P>
            </TD>

        </TR>
        <TR>
            <td> <b>GLIDEIN_GlobusRSL</b> </td>
            <TD> String </TD>
            <TD>
                ...&lt;entries&gt;&lt;entry rsl=&ldquo;<B>value</B>&rdquo;&gt;

            </TD>
            <TD>
                <P>Optional RSL string 
                (like &quot;(condor_submit=('+ProdSlot'
                'TRUE'))&quot;)</P>
            </TD>
        </TR>
        <TR>
            <td> <b>PROXY_URL</b> </td>

            <TD> String </TD>
            <TD>
                ...&lt;entries&gt;&lt;entry proxy_url=&ldquo;<B>value</B>&rdquo;&gt;
            </TD>
            <TD>

                <P>Optional URL of the site Web proxy.</P>
                <P>A special value &ldquo;OSG&rdquo; can be used to automatically
                discover the local Web proxy on OSG worker nodes.</P>
                <P>This variable is exported as <B>GLIDEIN_Proxy_URL</B> to the
                use job environment.</P>
            </TD>
        </TR>
        <TR>

            <td> <b>DEBUG_MODE</b> </td>
            <TD> String </TD>
            <TD>
                ...&lt;entries&gt;&lt;entry verbosity=&ldquo;<B>value</B>&rdquo;&gt;

            </TD>
            <TD>
                <P>This setting can be either:</P>
                <UL>
                    <LI><P>&ldquo;std&rdquo; - Default mode, where all interesting debug
                    information is reported back to the Glidein Factory and the
                    glidein will wait 20 minutes on a worker node that failed
                    validation to minimize the black hole effect.</P>
                    <LI><P>&ldquo;nodebug&rdquo; - Disable most diagnostic messages. This
                    can be useful for very stable setups. The glidein still waits 20
                    minutes on a worker node that failed validation to minimize the
                    black hole effect.</P>
                    <LI><P>Fast &ndash; All debugging is enabled and the glidein waits
                    only 2 minutes on a worker node that failed validation. This
                    mode is useful when debugging a misbehaving Grid site.</P>

                </UL>
            </TD>
        </TR>
</TABLE>
</div>
<div class="section">
<H3><A NAME="frontend_vars"></A>Frontend Client Variables</H3>
<P>The third set of values comes from the Glidein Frontend
clients. While a client can set any number of variables, the ones
described below ar the most often used.</P>
<TABLE class="attributes">
    <TR class="head">
        <td> <b>Name</b> </td>

        <td> <b>Type</b> </td>
        <td> <b>Description</b> </td>
    </TR>
    <TR>
        <td> <b>GLIDEIN_Client</b> </td>

        <TD> String </TD>
        <TD>
            <P>Identification name of the VO frontend request (like
            &ldquo;ucsd5@v1_0@osg1@cms4&rdquo;).</P>
        </TD>
    </TR>
    <TR>
        <td> <b>GLIDEIN_Collector</b> </td>

        <TD> List </TD>
        <TD>
            <P>List of Collector URIs used by the VO Condor pool (like
                &ldquo;cc.cms.edu:9620,cc.cms.edu:9621&rdquo;).</P>
                <P>One of the URIs in the list will be selected and used as
                <B>HEAD_NODE</B> in the condor_config.</P>
        </TD>

    </TR>
    <TR>
        <td> <b>GLIDECLIENT_Hold</b> </td>
        <TD> Exp (Bool)</td>

        <TD ROWSPAN=2>
            <P>Condor expression to use to specify when a user job in the glideins should be held. 
            If any expression is true, the glidein is held.  This is usually done to specify "bad"
            jobs, such as those that claim too much memory.
        </TD>

    </TR>
    <TR>
        <td> <b>GLIDECLIENT_Group_Hold</b> </td>
        <TD> Exp (Bool)</td>
    </TR>

    <TR>
        <td> <b>GLIDECLIENT_PREEMPT</b> </td>
        <TD> Exp (Bool)</td>

        <TD ROWSPAN=2>
            <P>Condor expression to use to specify when a user job in the glideins should be preempted. 
            If any expression is true, the glidein is preempted.  This is usually done to specify 
            custom preemption policies.
        </TD>

    </TR>
    <TR>
        <td> <b>GLIDECLIENT_Group_PREEMPT</b> </td>
        <TD> Exp (Bool)</td>
    </TR>







    <TR>
        <td> <b>GLIDECLIENT_Rank</b> </td>
        <td>Exp (Int)</td>
        <TD ROWSPAN=2>
                <P>Used in calculating the Condor <A HREF="http://www.cs.wisc.edu/condor/manual/v7.2/3_3Configuration.html#param:Rank">RANK</A></P><P>They
                are summed together, and the user job with the largest rank will run
                first.</P>

        </TD>
    </TR>
    <TR>
        <td> <b>GLIDECLIENT_Group_Rank</b> </td>
        <td> Exp (Int) </TD>

    </TR>
    <TR>
        <td> <b>GLIDEIN_Job_Max_Time</b> </td>
        <TD> Int </TD>
        <TD>
            <P>Max allowed time for the job to end.<BR>
            This is used by the
            condor_startd.  Once the GLIDEIN_Retire_Time expires, 
            the glidein will allow the job to run for this amount
            of time before activating DAEMON_SHUTDOWN and 
            killing the job. 
            Note that, if GLIDEIN_Max_Walltime is specified,
            this variable could be reduced by the glidein in order 
            to fit within Glidein_Max_Walltime.
            See <a href="#lifetime">Lifetime of a glidein</a> for details.</P>
        </TD>
    </TR>
    <TR>
        <td> <b>GLIDEIN_Expose_Grid_Env</b> </td>
        <td> Exp (Bool) </TD>

        <TD>
            <P>If False, the user job environment will contain only glidein
            factory provided variables.</P>
            <P>If True, the user job environment will also contain the
            environment variables defined at glidein startup. 
            </P>
            <P>See <A HREF="http://www.cs.wisc.edu/condor/manual/v7.2/3_3Configuration.html#param:JobInheritsStarterEnvironment">JOB_INHERITS_STARTER_ENVIRONMENT documentation</A> for more details.</P>
        </TD>
    </TR>
    <TR>
        <td> <b>GLIDEIN_Expose_X509</b> </td>
        <td> Exp (Bool) </TD>

        <TD>
            <p>By default, the glidein will unset the variable 
            X509_USER_PROXY for security reasons to prevent the user
            jobs from accessing the pilot proxy.  Setting this
            to true will override this behavior and keep the X509_USER_PROXY
            in the environment.
        </TD>
    </TR>
    <TR>
    <TR>
        <td> <b>SLOTS_LAYOUT</b> </td>
        <td> String </TD>

        <TD>
            Defines how multi-core glideins should split their resources.<br><br>
            There are only two legal values:
            <ul>
              <li><b>fixed</b> - create N single core slots, and split memory and disk equally mong them
              <li><b>partitionable</b> - start up with 
                        <a href="http://research.cs.wisc.edu/htcondor/manual/v8.0/3_5Policy_Configuration.html#sec:SMP-dynamicprovisioning">
                        a single partitionable slot and let HTCondor do the spliting as needed</a>
            </ul>

             The default behavior is defined by the factory, but it has historically been set to "fixed".<br><br>
             <b>Note: This variable MUST NOT be passed as a parameter, or the glideins will fail!</b>
        </TD>
    </TR>
    <TR>
        <td> <b>FORCE_PARTITIONABLE</b> </td>
        <td> String (Bool) </TD>

        <TD>
            By default, single core glideins will never be configured as partitionable, 
            independently of the value of <b>SLOTS_LAYOUT</b>.<br><br>

            If partitionable slots are desired also for single-core glideins, set this variable to <b>"True"</b>.
        </TD>
    </TR>
    <TR>
        <td> <b>GLIDEIN_Report_Failed</b> </td>
        <td> String </TD>

        <TD>
            <p>This attribute regulates advertising of validation failures to the user collector.
            <ul>
              <li><b>NEVER</b> - The glidein will just fail, and do nothing. (default)
              <li><b>ALIVEONLY</b> - The glidein will advertise a Machine ClassAd in <i>Drained</i> state and <i>Retiring</i> activity for the lifetime of the glidein script.
              <li><b>ALWAYS</b> - Similar to <b>ALIVEONLY</b>, but will also send a final ClassAd in <i>Drained</i> state and <i>Killing</i> activity just before dying.
            </ul>
            <p>When advertised, the classad is flagged <i>GLIDEIN_Failed=True</i>, 
               the error is recorded in the <i>GLIDEIN_FAILURE_REASON</i> and
                  <i>GLIDEIN_EXIT_CODE</i> attributes, and
               the failing script is recorded in the <i>GLIDEIN_LAST_SCRIPT</i> attribute.
       </TD>
    </TR>
    <TR>
        <td> <b>GLIDEIN_CLAIM_WORKLIFE</b> </td>
        <td> Int </TD>

        <TD>
            <p>CLAIM_WORKLIFE for non-dynamic slots. Defaults to -1 i.e. HTCondor will treat this as an infinite claim worklife and schedd will hold claim to the slot until jobs are preempted or user runs out of jobs.
        </TD>
    </TR>
    <TR>
        <td> <b>GLIDEIN_CLAIM_WORKLIFE_DYNAMIC</b> </td>
        <td> Int </TD>

        <TD>
            <p>CLAIM_WORKLIFE for dynamically partitionable slots. Defaults to 3600. This controls how frequently the dynamically partionable slots will coalesce.
        </TD>
    </TR>

</TABLE>
</div>





<div class="section">
<H3><A NAME="vm_vars"></A>Cloud VM specific Variables</H3>
<P>The following variables are only applicable to Cloud VMs.</P>
<P>These variables can be either configured by factory or the frontend</P>
<TABLE class="attributes">
    <TR class="head">
        <td> <P><b>Name</b></P></td>
        <td> <P><b>Type</b></P></td>
        <td> <P><b>Default Value</b></P></td>
        <td> <P><b>Description</b></P></td>

    </TR>
    <TR>
        <td> <b>VM_MAX_LIFETIME</b></td>
        <td> Int </td>
        <td> 172800 <br> (48 hours) </td>
        <td>
            <P>Max lifetime of the VM. When this timer is reached the
            glideinwms-pilot service will terminate and glidein process,
            shutdown the glideinwms-pilot service and issue a VM shutdown
            </P>
        </TD>
    </TR>
    <TR>
        <td> <b>VM_DISABLE_SHUTDOWN</b></td>
        <td> Bool </td>
        <td> False </td>
        <td>
            <P>Disables VM from automatically shutting down after
            the glideinwms-pilot service has exited.<br>
            <font color="ff0000"><b>NOTE:</b>
            This variable is for debugging purposes only and should
            not be set to True in the Production environment. Disabling
            auto shutdown could result in accumulating financial charges
            in case of paid clouds.</font></P>
        </TD>
    </TR>
</TABLE>




<div class="section">
<H3><A NAME="dyn_vars"></A>Dynamically generated variables</H3>
<P>The following variables are being dynamically generated and/or
modified by glideinWMS processes. The glideinWMS administrators
cannot directly change them.</P>
<P>The first set of variables comes from the Glidein Factory.</P>
<TABLE class="attributes">
    <TR class="head">
        <td> <b>Name</b> </td>

        <td> <b>Type</b> </td>
        <td> <b>Description</b> </td>
    </TR>
    <TR>
        <td> <b>GLIDEIN_Signature</b> </td>

        <TD> String </TD>
        <TD ROWSPAN=2>
            <P>These variables contain the SHA1 signature of the signature
            files.</P>
            <P>These signatures are used as a base to ensure the integrity of
            all the data downloaded in the glidein startup scripts, but they
            also provide a fingerprint of the configuration used by the
            glidein.</P>
            <P>These variables are published both in the glidein ClassAd and
            in the user job environenmt.</P>
        </TD>

    </TR>
    <TR>
        <td> <b>GLIDEIN_Entry_Signature</b> </td>
        <TD> String </TD>
        </TR>
    <TR>

        <td> <b>CONDORG_SCHEDD</b> </td>
        <TD> String </TD>
        <TD>
            <P>The schedd used by the Glidein Factory to submit the glidein.</P>
            <P>This variables is exported a <B>GLIDEIN_Schedd </B>both in the
            glidein ClassAd and to the user job environment.</P>

        </TD>
    </TR>
    <TR>
        <td> <b>CONDORG_CLUSTER</b> </td>
        <TD> Int </TD>
        <TD ROWSPAN=2>

            <P>The cluster and process id assigned by the Glidein Factory
            schedd to this glidein.</P>
            <P>These variables are exported as <B>GLIDEIN_ClusterId</B> and 
            <B>GLIDEIN_ProcId</B> both in the glidein ClassAd and to the user
            job environment.</P>
        </TD>
    </TR>
    <TR>

        <td> <b>CONDORG_SUBCLUSTER</b> </td>
        <TD> Int </TD>
    </TR>
</TABLE>
</div>
<div class="section">
<H3><A NAME="path_vars"></A>Directory Path Variables</H3>
<P>The next set contains the location of files and/or directories
downloaded or created by the glidein. Most of them are located under
the working directory specified by</P>
<BLOCKQUOTE>
    &lt;entry work_dir=&ldquo;value&rdquo;&gt;

</BLOCKQUOTE>
<TABLE class="attributes">
    <TR class="head">
        <td> <b>Name</b> </td>
        <td> <b>Description</b> </td>
    </TR>
    <TR>

        <td> <b>TMP_DIR</b> </td>
        <TD>
            <P>Path to the directory that admin-provided scripts and user jobs can use
            for storing temporary data.
            </P>
            <P>This variable is exported as <B>GLIDEIN_Tmp_Dir</B> both to
            the glidein ClassAd and to the user job environment.</P>
        </TD>

    </TR>
    <TR>

        <td> <b>GLIDEIN_LOCAL_TMP_DIR</b> </td>
        <TD>
            <P>Path to the directory on the local file system
            for storing temporary data.<br>
            <B>Note:</B> Only use for things that absolutely need the guarantee
                of residing in the local file system. 
                Prefer <b>TMP_DIR</b> above for everything else.
            </P>
            <P>This variable is exported to the user job environment.</P>
        </TD>

    </TR>
    <TR>
        <td> <b>CONDOR_VARS_FILE</b> </td>
        <TD ROWSPAN=2>
            <P>File path to the condor vars files.</P>
            <P>Admin-provided scripts may want to add entries to these files.</P>

        </TD>
        </TR>
    <TR>
        <td> <b>CONDOR_VARS_ENTRY_FILE</b> </td>
    </TR>
    <TR>
        <td> <b>ADD_CONFIG_LINE_SOURCE</b> </td>

        <TD>
            <P>File path to the script containing the
            add_config_line and add_confir_vars line functions.</P>
        </TD>
    </TR>
    <TR>
        <td> <b>X509_USER_PROXY</b> </td>
        <TD>

            <P>File path to the glidein proxy file.</P>
        </TD>
    </TR>
    <TR>
        <td> <b>X509_CONDORMAP</b> </td>
        <TD>
            <P>File path to the Condor mapfile used by the glidein.</P>

        </TD>
    </TR>
    <TR>
        <td> <b>X509_CERT_DIR</b> </td>
        <TD>
            <P>Path to the directory containing the trusted CAs' public keys
            and RSLs.</P>
        </TD>

    </TR>
    <TR>
        <td> <b>CONDOR_DIR</b> </td>
        <TD>
            <P>Directory where the glidein Condor binary distribution have
            been installed.</P>
        </TD>
    </TR>

    <TR>
        <td> <b>WRAPPER_LIST</b> </td>
        <TD>
            <P>File path to the list of wrapper scripts used by the glidein.</P>
        </TD>
    </TR>
    <TR>
        <td> <b>GLIDEIN_WRAPPER_EXEC</b> </td>
        <TD>
            <P>
                This is the executable that glideins will run (ie what to 
                put after "exec" in the condor job wrapper).  By default,
                glideins will perform <tt>exec "\$@"</tt> to run the pilot.
                For other modes of execution, you may need different 
                arguments.  For example, to run a program under parrot, you 
                may need 
                <tt>exec "$GLIDEIN_PARROT/parrot_run" 
                -t "$parrot_tmp" "$@" </tt>.<br/>
                Note, the syntax of this command is very sensitiv
                This needs to be double-escaped in order to function correctly.
                For the two examples listed above, you would need:
                <ul>
                <li><tt>"\\\"\\\$@\\\""</tt></li>
                <li><tt>"\\\"\\\$GLIDEIN_PARROT/parrot_run\\\" -t \\\"$parrot_tmp\\\" \\\"\\\$@\\\""</tt>
                </ul>
            </P>
        </TD>
    </TR>
</TABLE>
</div>
<div class="section">
<H3><A NAME="glidein_vars"></A>Glidein Script Variables (dynamic)</H3>

<P>The last set contains various variables generated by the glidein
startup scripts.</P>
<TABLE class="attributes">
    <TR class="head">
        <td> <b>Name</b> </td>
        <td> <b>Type</b> </td>
        <td> <b>Description</b> </td>

    </TR>
    <TR>
        <td> <b>X509_GRIDMAP_DNS</b> </td>
        <TD> String </TD>
        <TD>
            <P>List of DNs trusted by the glidein.</P>

        </TD>
    </TR>
    <TR>
        <td> <b>X509_EXPIRE</b> </td>
        <TD> time_t </TD>
        <TD>

            <P>When is the proxy expected to expire.</P>
        </TD>
    </TR>
    <TR>
        <td> <b>GLEXEC_STARTER</b> </td>
        <TD> Bool </TD>

        <TD
            <P>If gLExec is used and this is set to True, the condor_starter
            will be run sharing the <A HREF="configuration.html#glexec">same UID as
            the user job</A>.</P>
        </TD>
    </TR>
    <TR>
        <td> <b>ALTERNATIVE_SHELL</b> </td>
        <TD> String </TD>

        <TD>
            <P>If gLExec is used, this variable points to a trusted copy of a
            shell.</P>
        </TD>
    </TR>
    <TR>
        <td> <b>GLEXEC_USER_DIR</b> </td>
        <TD> String </TD>

        <TD
            <P>If gLExec is used, this variable points to the working
            directory under which all user jobs will be started.</P>
        </TD>
    </TR>
</TABLE>
</div>
<div class="section">
<a name="lifetime" />
<h2>Lifetime of a Glidein</h2>
<img src="../images/retire_times.png" />
<p>
All the various variables in the glidein configuration can be confusing.
The above diagram illustrates the lifetime of a glidein pilot that has a
long-running job.  

<ul>
<li><font color="499946"><i>Green</i></font>:
For the first GLIDEIN_Retire_Time seconds (modified by
a random spread GLIDEIN_Retire_Spread to smooth out glideins all ending
simultaneously), jobs can start on the glidein pilot.  
</li>
<li><font color="f8d844"><i>Yellow</i></font>:
During the yellow period, START will evauluate to FALSE, 
so no new jobs will start.  However,
already running jobs will continue to run for GLIDEIN_Job_Max_Time.  
(Note that the glideins will end during this period if the job ends.
They will not idle afterwards since no new jobs can start anyway).
</li>
<li>
Once this period is done, the DAEMON_SHUTDOWN variable will be true.</li>
<li><font color="f8bb44"><i>Orange</i></font>:
There can be a delay of up to UPDATE_INTERVAL (usually about 5 minutes)
between when DAEMON_SHUTDOWN becomes true and when it is actually 
updated in the collector.  This is because the collector only reevaluates
this expression periodically.
</li>
<li><font color="c7484c"><i>Red</i></font>:
Once DAEMON_SHUTDOWN is true, condor gives a short grace period of
GLIDEIN_Graceful_Shutdown before forcefully terminating everything and 
shutting down.  All of these periods are totalled and calculated to fit
within GLIDEIN_MAX_WALLTIME if specified.
</li>
</ul>
</p>
<p>Note that if a job ends early in the green period, a new job will start.
If a job ends after this period, then the glidein will shut down and end
early.  This can be seen in the example below with two jobs below:
</p>
<img src="../images/idle_times.jpg" />
<p>
<ul>
<li><font color="f8bb44"><i>Orange</i></font>:
A glidein first starts up.</li>
<li><font color="f8d844"><i>Yellow</i></font>:
After starting up, the glidein will wait for Glidein_Max_Idle
for its initial matching.  If it is Idle for longer than this,
it will assume no jobs are available and will shutdown.</li>
<li><font color="499946"><i>Green</i></font>:
A job runs (subject to the maximum limits in the previous diagram).
<li><font color="f8d844"><i>Yellow</i></font>:
Once a job runs, it will wait for Glidein_Max_Tail for another job.
</li>
<li><font color="499946"><i>Green</i></font>:
Another matching job runs.</li>
<li><font color="f8d844"><i>Yellow</i></font>:
Once the job finishes, it will wait for Glidein_Max_Tail for another job.
If cannot find one, it will shutdown.
</li>
</ul>
Note that for GlideinWMS versions before 3.2.7 or for glidins using HTCondor pre 8.2, 
the idle limits are cumulative (it counts total idle time), so that
the total idle times in all the yellow zones above will be counted towards
GLIDEIN_Max_Tail. Not so for GlideinWMS 3.2.7 and HTCondor 8.2 or later, 
where Glidein_Max_Tail counts the idle time after the previous job ends, as specified above.
</div>
<div class="footer">
Banner image by
<a href="http://www.flickr.com/people/leafwarbler/">Madhusudan Katti</a>
used under Creative Commons license.<br/>
Original Home URL: <a href="http://glideinwms.fnal.gov">http://glideinwms.fnal.gov</a>.
glideinWMS email support: glideinwms-support at fnal.gov
</div>

</div>
</body>
</html>
